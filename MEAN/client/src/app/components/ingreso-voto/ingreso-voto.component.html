<div class="voting-ballot">
    <h1 class="ballot-title">Papeleta de Votación</h1>

    <div *ngIf="loading" class="loading-overlay">
        <div class="spinner"></div>
        <p>Cargando opciones de voto...</p>
    </div>

    <div *ngIf="!loading" class="candidates-grid">
        <div *ngFor="let candidato of candidatos; let i = index" class="candidate-card"
            [class.selected]="candidatoSeleccionadoId === candidato._id"
            [class.voto-en-blanco]="candidato._id === votoEnBlancoId">
            <div class="candidate-number" *ngIf="candidato._id !== votoEnBlancoId">{{i + 1}}</div>
            <div class="candidate-image">
                <img [src]="candidato.foto" [alt]="candidato.nombreCompleto">
            </div>
            <div class="candidate-info">
                <h2 class="candidate-name">{{candidato.nombreCompleto}}</h2>
                <p class="candidate-profile" *ngIf="candidato._id !== votoEnBlancoId"><strong>Perfil:</strong> {{candidato.perfil}}</p>
                <p class="candidate-proposal" *ngIf="candidato._id !== votoEnBlancoId"><strong>Propuesta:</strong> {{candidato.propuestas}}</p>
                <p class="voto-en-blanco-description" *ngIf="candidato._id === votoEnBlancoId">{{candidato.propuestas}}</p>
            </div>
            <div class="vote-button-container">
                <button class="vote-button" (click)="onCandidatoSelect(candidato._id)"
                    [class.selected]="candidatoSeleccionadoId === candidato._id">
                    <span class="vote-icon" [class.selected]="candidatoSeleccionadoId === candidato._id">✓</span>
                    {{ candidatoSeleccionadoId === candidato._id ? 'Seleccionado' : 'Seleccionar' }}
                </button>
            </div>
        </div>
    </div>

    <button class="submit-vote-button" (click)="confirmarVoto()" [disabled]="!candidatoSeleccionadoId">
        Emitir Mi Voto
    </button>
</div>